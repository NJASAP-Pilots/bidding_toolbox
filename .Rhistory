panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.line = element_line(color = "black"),
legend.position = "top",
#legend.direction =  "horizontal"
)
ggsave("7_7_Global_Line_Dist_Snrty.png", path = "images",
width = 1888,
height = 1000,
units =c("px"),
device = NULL,
dpi = 173)
tjune_bid_clean %>%
filter(str_detect(schedule_type, "^7")) %>%
group_by(line_num, schedule_type, weekend) %>%
summarise(count = n(),
avg_snrty = mean(union_seniority, na.rm = T),
.groups = "drop"
) %>%
mutate(schedule_type = fct_reorder(schedule_type, line_num),
percent = label_percent(accuracy = 0.1)(count / sum(count)),
avg_snrty = format(round(avg_snrty, 0), big.mark = ",")) %>%
ggplot(aes(schedule_type, count))+
geom_col(aes(fill = weekend))+
geom_text(aes(label = glue("{count} ({percent})")), vjust = -0.5)+
# geom_text(aes(label = glue("Avg. Snrty\n{avg_snrty}")),
#           vjust = 1.3,
#           color = "white")+
theme_bw()+
labs(x = "",
y = "Count",
title = "7&7 Line Distribution",
subtitle = "*All Fleets and Seats*",
fill = ""
)+
scale_fill_manual(values = c("steelblue", "#2C5171"))+
theme(plot.title = element_markdown(),
plot.subtitle = element_markdown(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.line = element_line(color = "black"),
legend.position = "top",
#legend.direction =  "horizontal"
)
ggsave("7_7_Global_Line_Dist_Snrty.png", path = "images",
width = 1888,
height = 800,
units =c("px"),
device = NULL,
dpi = 173)
tjune_bid_clean %>%
filter(str_detect(schedule_type, "^7")) %>%
group_by(line_num, schedule_type, weekend) %>%
summarise(count = n(),
avg_snrty = mean(union_seniority, na.rm = T),
.groups = "drop"
) %>%
mutate(schedule_type = fct_reorder(schedule_type, line_num),
percent = label_percent(accuracy = 0.1)(count / sum(count)),
avg_snrty = format(round(avg_snrty, 0), big.mark = ",")) %>%
ggplot(aes(schedule_type, count))+
geom_col(aes(fill = weekend))+
geom_text(aes(label = glue("{count} ({percent})")), vjust = -0.5)+
# geom_text(aes(label = glue("Avg. Snrty\n{avg_snrty}")),
#           vjust = 1.3,
#           color = "white")+
theme_bw()+
labs(x = "",
y = "Count",
title = "7&7 Line Distribution",
subtitle = "*All Fleets and Seats*",
fill = ""
)+
scale_fill_manual(values = c("steelblue", "#2C5171"))+
theme(plot.title = element_markdown(),
plot.subtitle = element_markdown(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.line = element_line(color = "black"),
legend.position = "top",
#legend.direction =  "horizontal"
)
ggsave("7_7_Global_Line_Dist_Snrty.png", path = "images",
width = 1888,
height = 900,
units =c("px"),
device = NULL,
dpi = 173)
fline_distribution <- function(schedx, seatx, fleetx){
line_type <- ifelse(schedx == "^7", "7&7", "8&6")
tjune_bid_clean %>%
filter(str_detect(schedule_type, schedx),
fleet == fleetx,
seat == seatx) %>%
group_by(line_num, schedule_type, weekend) %>%
summarise(count = n(),
avg_snrty = mean(union_seniority, na.rm = T),
.groups = "drop") %>%
mutate(schedule_type = fct_reorder(schedule_type, line_num),
percent = label_percent(accuracy = 0.1)(count / sum(count)),
avg_snrty = format(round(avg_snrty, 0), big.mark = ",")) %>%
ggplot(aes(schedule_type, count))+
geom_col(aes(fill = weekend))+
geom_text(aes(label = glue("{count} ({percent})")), vjust = -0.5)+
# geom_text(aes(label = glue("Avg. Snrty\n{avg_snrty}")),
#           vjust = 1.3,
#           color = "white")+
theme_bw()+
labs(x = "",
y = "Count",
title = glue("{line_type} Line Distribution"),
subtitle = glue("*{fleetx} {seatx}*"),
fill = ""
)+
scale_fill_manual(values = c("steelblue", "#2C5171"))+
theme(plot.title = element_markdown(),
plot.subtitle = element_markdown(),
panel.border = element_blank(),
axis.line = element_line(color = "black"),
legend.position = "top",
#legend.direction =  "horizontal"
)
ggsave(glue("{line_type}_{fleetx}_{seatx}.png"), path = "images/Line_Dists",
width = 1888,
height = 900,
units =c("px"),
device = NULL,
dpi = 173)
}
library(tidyverse)
library(readxl)
library(ggplot2)
library(scales)
library(lubridate)
library(glue)
library(ggtext)
### Ops Schedule Import & Clean ###
ops_sched_file <- dir(path = "~/OneDrive - NJASAP/Documents/Operational Schedules/Ops Schedules Merge PowerQuery/2021",
full.names = T,
pattern = "2024-06 All Fleets.*\\.xlsx$")
tjune_ops_sched <- read_excel(ops_sched_file,
sheet = "Sheet1",
range = cell_cols(1:6)
)
tjune_ops_sched <- tjune_ops_sched %>%
rename_with(~tolower(gsub(" ","_", .x)))
tjune_ops_sched %>%
select(position) %>%
unique()
tjune_bid_clean <- tjune_ops_sched %>%
rename_with(~tolower(gsub(" ","_", .x))) %>%
filter(str_detect(schedule_type, "^7|^8"),
! position %in% c("FA", "FACA", "FIOE", "NQPS", "NQC")) %>%
mutate(across(schedule_type, ~gsub("7 & 7 - ", "7&7_", .x)),
across(schedule_type, ~gsub("8&6 - ", "8&6_", .x)),
across(schedule_type, ~gsub(" W/Travel - ", "_", .x)),
across(schedule_type, ~gsub(" TSP - ", "_", .x)),
line_num = as.double(str_extract(schedule_type, "\\d{1,2}$")),
weekend = case_when(line_num == 2 ~ "Weekend",
line_num == 3 ~ "Weekend",
line_num == 9 ~ "Weekend",
line_num == 10 ~ "Weekend",
TRUE ~ "Weekday"
),
seat = case_when(position == "CA" ~ "PIC",
position == "TR" ~ "PIC",
position == "SIOE" ~ "SIC",
TRUE ~ position)
)
seniority_file <- dir(path = "~/OneDrive - NJASAP/Documents/Seniority Related/Seniority List - Union/2024",
full.names = T,
pattern = "2024-05.*\\.xlsx$")
tseniority <- read_excel(seniority_file,
sheet = "UNION_EXCEL_FILE",
range = cell_cols(1:16)
)
tseniority <- tseniority %>%
rename_with(~tolower(gsub(" ","_",.x)))
tjune_bid_clean <- tjune_bid_clean %>%
left_join(tseniority, by = c("cmi" = "cmi")) %>%
select(1:9, union_seniority) %>%
rename(name = name.x, seat = seat.x)
tfunction_variables %>%
pmap_chr(fline_distribution)
tjune_bid_clean %>%
filter(str_detect(schedule_type, "^8")) %>%
group_by(line_num, schedule_type, weekend) %>%
summarise(count = n(),
avg_snrty = mean(union_seniority, na.rm = T),
.groups = "drop"
) %>%
mutate(schedule_type = fct_reorder(schedule_type, line_num),
percent = label_percent(accuracy = 0.1)(count / sum(count)),
avg_snrty = format(round(avg_snrty, 0), big.mark = ",")) %>%
ggplot(aes(schedule_type, count))+
geom_col(aes(fill = weekend))+
geom_text(aes(label = glue("{count} ({percent})")), vjust = -0.5)+
# geom_text(aes(label = glue("Avg. Snrty\n{avg_snrty}")),
#           vjust = 1.3,
#           color = "white")+
theme_bw()+
labs(x = "",
y = "Count",
title = "8&6 Line Distribution",
subtitle = "*All Fleets and Seats*",
fill = ""
)+
scale_fill_manual(values = c("steelblue", "#2C5171"))+
theme(plot.title = element_markdown(),
plot.subtitle = element_markdown(),
panel.grid.major = element_blank(),
panel.border = element_blank(),
axis.line = element_line(color = "black"),
legend.position = "top",
#legend.direction =  "horizontal"
)
ggsave("8_6_Global_Line_Dist_Snrty.png", path = "images",
width = 1888,
height = 900,
units =c("px"),
device = NULL,
dpi = 173)
library(tidyverse)
library(readxl)
library(ggplot2)
library(readxl)
library(scales)
# Read in Contract Year Gains Table
tContract_Year_Gains_ALL <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C33:H41")
View(tContract_Year_Gains_ALL)
###
tContract_Year_Gains <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C4:H8")
View(tContract_Year_Gains)
###
tContract_Year_Gains_FDP <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C12:H16")
view(tContract_Year_Gains_FDP)
# Pivot Contract Year Gains
tContract_Year_Gains_Pivot_ALL <- tContract_Year_Gains_ALL %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot_ALL)
tContract_Year_Gains_Pivot <- tContract_Year_Gains %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot)
tContract_Year_Gains_Pivot_FDP <- tContract_Year_Gains_FDP %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot_FDP)
# Add Seat Field
tContract_Year_Gains_Pivot_ALL$Seat <- tContract_Year_Gains_Pivot_ALL$`Year & Seat`
tContract_Year_Gains_Pivot$Seat <- tContract_Year_Gains_Pivot$`Year & Seat`
tContract_Year_Gains_Pivot_FDP$Seat <- tContract_Year_Gains_Pivot_FDP$`Year & Seat`
tContract_Year_Gains_Pivot %>%
group_by(`Year & Seat`) %>%
ggplot(aes(Year, Wage)) +
# geom_point(size = 5, alpha = 0.3) +
geom_line() +
theme_bw() +
labs(title = "Effect on Wage by Contract Year")
glimpse(tContract_Year_Gains_Pivot)
tCrew_Progression <- X2024_03_15_2024_Officer_Elections_Modeling
View(tContract_Year_Gains_ALL)
View(tContract_Year_Gains)
tCrew_Progression_Pivot %>%
ggplot(aes(Year, Wage, group = Pilot)) +
geom_line(aes(color = Pilot)) +
geom_point(aes(color = Pilot)) +
scale_y_continuous(labels = comma) +
scale_x_continuous(breaks = seq(2005,2030, by=1)) +
theme_bw() +
labs(title = "Effect on Wage by Contract Year") +
theme(plot.title =
element_text(color = "steelblue",
# face = "bold",
size = 18,
face = "italic",
hjust = 0.5),
axis.text =
element_text(color = "steelblue",
face = "bold"),
axis.title =
element_text(color = "steelblue",
face = "italic",
size = 13),
legend.position = c(0.1, 0.9)
)
tCrew_Progression_Pivot <- tCrew_Progression %>%
pivot_longer(cols = 2:3,
names_to = "Pilot",
values_to = "Wage")
library(tidyverse)
library(readxl)
library(ggplot2)
library(readxl)
library(scales)
# Read in Contract Year Gains Table
tContract_Year_Gains_ALL <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C33:H41")
# View(tContract_Year_Gains_ALL)
###
tContract_Year_Gains <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C4:H8")
# View(tContract_Year_Gains)
###
tContract_Year_Gains_FDP <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C12:H16")
tContract_Year_Gains_Pivot_ALL <- tContract_Year_Gains_ALL %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot_ALL)
tContract_Year_Gains_Pivot <- tContract_Year_Gains %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot)
tContract_Year_Gains_Pivot_FDP <- tContract_Year_Gains_FDP %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
view(tContract_Year_Gains_Pivot_FDP)
tContract_Year_Gains_Pivot_ALL$Seat <- tContract_Year_Gains_Pivot_ALL$`Year & Seat`
tContract_Year_Gains_Pivot$Seat <- tContract_Year_Gains_Pivot$`Year & Seat`
tContract_Year_Gains_Pivot_FDP$Seat <- tContract_Year_Gains_Pivot_FDP$`Year & Seat`
tContract_Year_Gains_Pivot_ALL <- tContract_Year_Gains_ALL %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
# view(tContract_Year_Gains_Pivot_ALL)
tContract_Year_Gains_Pivot <- tContract_Year_Gains %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
# view(tContract_Year_Gains_Pivot)
tContract_Year_Gains_Pivot_FDP <- tContract_Year_Gains_FDP %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot_ALL$Seat <- tContract_Year_Gains_Pivot_ALL$`Year & Seat`
tContract_Year_Gains_Pivot$Seat <- tContract_Year_Gains_Pivot$`Year & Seat`
tContract_Year_Gains_Pivot_FDP$Seat <- tContract_Year_Gains_Pivot_FDP$`Year & Seat`
tContract_Year_Gains_Pivot %>%
group_by(`Year & Seat`) %>%
ggplot(aes(Year, Wage)) +
# geom_point(size = 5, alpha = 0.3) +
geom_line() +
theme_bw() +
labs(title = "Effect on Wage by Contract Year")
tCrew_Progression <- X2024_03_15_2024_Officer_Elections_Modeling
tCrew_Progression %>%
ggplot(aes(Year)) +
geom_line()+
theme_bw()
tCrew_Progression <- X2024_03_15_2024_Officer_Elections_Modeling
###
tContract_Year_Gains_FDP <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C12:H16")
###
tContract_Year_Gains <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C4:H8")
tContract_Year_Gains_ALL <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C33:H41")
tCrew_Progression %>%
ggplot(aes(Year)) +
geom_line()+
theme_bw()
View(tContract_Year_Gains_Pivot)
tContract_Year_Gains_Pivot %>%
ggplot(aes(Year, Wage, group = Seat)) +
geom_line(aes(color = Seat)) +
geom_point(aes(color = Seat)) +
scale_y_continuous(labels = comma) +
theme_bw() +
labs(title = "Contract Effect on Fleet, Seat, & YOS") +
theme(plot.title =
element_text(color = "steelblue",
# face = "bold",
size = 18,
face = "italic",
hjust = 0.5),
axis.text =
element_text(color = "steelblue",
face = "bold"),
axis.title =
element_text(color = "steelblue",
face = "italic",
size = 13),
legend.position = c(0.1, 0.85)
)
View(tContract_Year_Gains_Pivot)
tContract_Year_Gains
tContract_Year_Gains_FDP
tContract_Year_Gains_ALL
tContract_Year_Gains_ALL <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C35:H43")
tContract_Year_Gains_ALL
tContract_Year_Gains_Pivot_ALL <- tContract_Year_Gains_ALL %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains
tContract_Year_Gains_Pivot <- tContract_Year_Gains %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot_FDP <- tContract_Year_Gains_FDP %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot_ALL$Seat
tContract_Year_Gains_Pivot %>%
group_by(`Year & Seat`) %>%
ggplot(aes(Year, Wage)) +
# geom_point(size = 5, alpha = 0.3) +
geom_line() +
theme_bw() +
labs(title = "Effect on Wage by Contract Year")
tContract_Year_Gains_Pivot %>%
group_by(`Year & Seat`)
tContract_Year_Gains_Pivot
tContract_Year_Gains_Pivot %>%
# group_by(`Year & Seat`) %>%
ggplot(aes(Year, Wage, group = `Year & Seat`)) +
# geom_point(size = 5, alpha = 0.3) +
geom_line() +
theme_bw() +
labs(title = "Effect on Wage by Contract Year")
X2024_03_15_2024_Officer_Elections_Modeling
tContract_Year_Gains_Pivot %>%
ggplot(aes(Year, Wage, group = `Year & Seat`)) +
geom_line(aes(color = `Year & Seat`)) +
theme_bw()
tContract_Year_Gains_Pivot$Seat <- tContract_Year_Gains_Pivot$`Year & Seat`
tContract_Year_Gains_Pivot
tContract_Year_Gains_ALL <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C35:H43")
# View(tContract_Year_Gains_ALL)
###
tContract_Year_Gains <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C4:H8")
# View(tContract_Year_Gains)
###
tContract_Year_Gains_FDP <- read_excel("~/OneDrive/Documents/2024 Executive Board Electionos/2024-03-15 2024 Officer Elections Modeling.xlsx",
range = "C12:H16")
tContract_Year_Gains_ALL
library(tidyverse)
library(readxl)
library(ggplot2)
library(readxl)
library(scales)
tContract_Year_Gains_Pivot_ALL <- tContract_Year_Gains_ALL %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot <- tContract_Year_Gains %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot_FDP <- tContract_Year_Gains_FDP %>%
pivot_longer(cols = 2:6,
names_to = "Year",
values_to = "Wage")
tContract_Year_Gains_Pivot_ALL
tContract_Year_Gains_Pivot
tContract_Year_Gains_Pivot_FDP
tContract_Year_Gains_Pivot %>%
# group_by(`Year & Seat`) %>%
ggplot(aes(Year, Wage, group = `Year & Seat`)) +
# geom_point(size = 5, alpha = 0.3) +
geom_line() +
theme_bw() +
labs(title = "Effect on Wage by Contract Year")
tCrew_Progression %>%
ggplot(aes(Year)) +
geom_line()+
theme_bw()
tContract_Year_Gains_Pivot %>%
ggplot(aes(Year, Wage, group = `Year & Seat`)) +
geom_line(aes(color = `Year & Seat`)) +
theme_bw()
tContract_Year_Gains_Pivot
tContract_Year_Gains_Pivot %>%
ggplot(aes(Year, Wage, group = Seat)) +
geom_line(aes(color = Seat)) +
geom_point(aes(color = Seat)) +
scale_y_continuous(labels = comma) +
theme_bw() +
labs(title = "Contract Effect on Fleet, Seat, & YOS") +
theme(plot.title =
element_text(color = "steelblue",
# face = "bold",
size = 18,
face = "italic",
hjust = 0.5),
axis.text =
element_text(color = "steelblue",
face = "bold"),
axis.title =
element_text(color = "steelblue",
face = "italic",
size = 13),
legend.position = c(0.1, 0.85)
)
View(tContract_Year_Gains_ALL)
View(tContract_Year_Gains_Pivot_ALL)
